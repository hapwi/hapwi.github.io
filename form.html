<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#282c34">
    <meta property="og:title" content="Form">
    <meta property="og:image" content="https://golf.contact/logo.png">
    <meta property="og:url" content="https://golf.contact/">
    <link rel="shortcut icon" href="logo.png" type="image/x-icon">
    <title>Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css"
        crossorigin="anonymous">
    <link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="styles/form.css">
    <link rel="stylesheet" href="./styles/main.css">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.0.13/dist/js/select2.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@10/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
</head>

<body id="form">
    <script src="js/header-footer.js"></script>
    <div class="container text-center pt-custom">
        <div class="card">
            <div class="card-body rounded card1">
                <h1 class="mb-3">Rules</h1>
                <p>$25 entry fee. WINNER TAKE ALL</p>
                <p class="font-weight-bold">Winner will be paid on the Monday <i class="mdi mdi-tournament:">after</i>
                    the tournament by<i class="mdi mdi-tournament:">3 PM EST</i></p>
                <p>Pick 6 golfers competing in the tournament. Your top 5 golfers will count. That means your worst
                    golfer's score at the end of Sunday will be dropped.</p>
                <p>You are allowed to only take 2 golfers in the Vegas Top 10 odds favorites to win the tournament
                    (LIST BELOW).</p>
                <p>The pool runs similar to the game of golf. Your 6 golfer's scores after their rounds will be added
                    up. The lower the better.</p>
                <p class="font-weight-bold">If one of your selected golfers does not make the cut, he will be scored
                    an 80 on Saturday and Sunday.</p>
                <p class="font-weight-bold">If one of your selected golfers withdraws, he will be scored an 80 for all
                    four rounds.</p>
                <p class="font-weight-bold">If one of your selected golfers is disqualified, he will be scored an 80
                    for all four rounds.</p>
                <p>Along with your golfers I will need a tie breaker. The tie breaker is your prediction of what the
                    champions final score to par will be. Example: Scottie Scheffler won last year's Masters shooting
                    -10, meaning a -10 on the total tournament would have been the right tie breaker.</p>
                <p class="font-weight-bold">Venmo is the preferred payment method (@pblang). Easy collect, easy send
                    off.</p>
                <p>Leaderboard will update automatically.</p>
                <p>Submissions will be accepted all the way up to the first tee time on Thursday which is typically at
                    8:00 am.</p>
                <p>Feel free to forward to friends or family that may be interested!</p>
                <p>Cheers and good luck!</p>
                <p class="font-weight-bold">** IF PAYMENT IS NOT RECEIVED BY FIRST TEE TIME YOU WILL BE DISQUALIFIED
                    **</p>
                <h1 class="mb-3">Vegas Top 10</h1>
                <table class="table table-rounded table-bordered table-striped table-dark">
                    <thead>
                        <tr>
                            <th>Golfer</th>
                            <th>Draftkings Odds</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Scottie Scheffler</td>
                            <td>+400</td>
                        </tr>
                        <tr>
                            <td>Rory McIlroy</td>
                            <td>+750</td>
                        </tr>
                        <tr>
                            <td>Xander Schauffele</td>
                            <td>+1400</td>
                        </tr>
                        <tr>
                            <td>Brooks Koepka</td>
                            <td>+1600</td>
                        </tr>
                        <tr>
                            <td>Jon Rahm</td>
                            <td>+1600</td>
                        </tr>
                        <tr>
                            <td>Ludvig Åberg</td>
                            <td>+2200</td>
                        </tr>
                        <tr>
                            <td>Bryson DeChambeau</td>
                            <td>+2800</td>
                        </tr>
                        <tr>
                            <td>Collin Morikawa</td>
                            <td>+3000</td>
                        </tr>
                        <tr>
                            <td>Max Homa</td>
                            <td>+3500</td>
                        </tr>
                        <tr>
                            <td>Joaquin Niemann</td>
                            <td>+3500</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <div class="container py-1">
        <h1 class="mb-5 text-center"></h1>
        <div class="card" id="card2">
            <div class="card-body rounded card2">
                <form id="myForm">
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input name="email" type="email" class="form-control" id="email" placeholder="Enter email"
                            required>
                    </div>
                    <div class="form-group">
                        <label for="venmo">Venmo</label>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="venmo-addon">@</span>
                            </div>
                            <input name="venmo" type="text" class="form-control" id="venmo" placeholder="Username"
                                aria-describedby="venmo-addon" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="name">Name</label>
                        <input name="name" type="text" class="form-control" id="name" placeholder="Enter name"
                            required>
                    </div>
                    <div class="form-group">
                        <label for="golfer1">Golfer 1</label>
                        <input name="golfer1" type="text" class="form-control golfer" id="golfer1"
                            placeholder="Enter Golfer 1" required>
                    </div>
                    <div class="form-group">
                        <label for="golfer2">Golfer 2</label>
                        <input name="golfer2" type="text" class="form-control golfer" id="golfer2"
                            placeholder="Enter Golfer 2" required>
                    </div>
                    <div class="form-group">
                        <label for="golfer3">Golfer 3</label>
                        <input name="golfer3" type="text" class="form-control golfer" id="golfer3"
                            placeholder="Enter Golfer 3" required>
                    </div>
                    <div class="form-group">
                        <label for="golfer4">Golfer 4</label>
                        <input name="golfer4" type="text" class="form-control golfer" id="golfer4"
                            placeholder="Enter Golfer 4" required>
                    </div>
                    <div class="form-group">
                        <label for="golfer5">Golfer 5</label>
                        <input name="golfer5" type="text" class="form-control golfer" id="golfer5"
                            placeholder="Enter Golfer 5" required>
                    </div>
                    <div class="form-group">
                        <label for="golfer6">Golfer 6</label>
                        <input name="golfer6" type="text" class="form-control golfer" id="golfer6"
                            placeholder="Enter Golfer 6" required>
                    </div>
                    <div class="form-group">
                        <label for="tiebreaker">Tie Breaker (Score)</label>
                        <input name="tiebreaker" type="number" class="form-control" id="tiebreaker"
                            placeholder="Enter Tie Breaker Score" required>
                    </div>

                    <script>
                        $(document).ready(function () {
                            var topGolfers = [
                                "Scottie Scheffler", "Rory McIlroy", "Xander Schauffele", "Brooks Koepka", "Jon Rahm",
                                "Ludvig Åberg", "Bryson DeChambeau", "Collin Morikawa", "Max Homa", "Joaquin Niemann"
                            ];

                            var availableGolfers = [
                                "Shaun Micheel", "Luke Donald", "Michael Block", "Adrian Meronk", "Doug Ghim", "Tyler Collet",
                                "Ben Kohles", "Jeff Kellen", "Alex Smalley", "Grayson Murray", "Lucas Herbert", "Larkin Gross",
                                "Ryan Fox", "Matt Wallace", "Josh Speight", "Lucas Glover", "Russell Henley", "Stephan Jaeger",
                                "Adam Svensson", "Ryo Hisatsune", "Zac Oakley", "Justin Thomas", "Xander Schauffele", "Ludvig Åberg",
                                "Martin Kaymer", "Adam Hadwin", "Taylor Pendrith", "Adam Scott", "Tiger Woods", "Keegan Bradley",
                                "Byeong Hun An", "Alexander Björk", "Eric Cole", "Justin Rose", "Dustin Johnson", "Rory McIlroy",
                                "Corey Conners", "Adam Schenk", "Nick Dunlap", "Hideki Matsuyama", "Cameron Smith", "Viktor Hovland",
                                "John Daly", "Robert MacIntyre", "Lee Hodges", "Jordan Spieth", "Brooks Koepka", "Max Homa",
                                "Peter Malnati", "Kurt Kitayama", "Victor Perez", "Tony Finau", "Tyrrell Hatton", "Sahith Theegala",
                                "Zac Blair", "Ben Polland", "Ryan van Velzen", "Tommy Fleetwood", "Bryson DeChambeau", "Akshay Bhatia",
                                "K.H. Lee", "Jeremy Wells", "Sami Välimäki", "Nick Taylor", "Sepp Straka", "Takumi Kanaya",
                                "Patrick Rodgers", "Taylor Moore", "Jared Jones", "Andrew Svoboda", "Dean Burmester", "Ben Griffin",
                                "Erik van Rooyen", "Andy Ogletree", "Kyle Mendoza", "Adrian Otaegui", "Tim Widing", "Preston Cole",
                                "Rich Beem", "Sebastian Söderberg", "Kazuma Kobori", "Matt Dobyns", "Thriston Lawrence", "David Puig",
                                "Jordan Smith", "Aaron Rai", "Josh Bevell", "Tracy Phillips", "Denny McCarthy", "Keita Nakajima",
                                "Charley Hoffman", "Jesse Mueller", "Andrew Putnam", "Harris English", "Talor Gooch", "Cam Davis",
                                "Alex Noren", "Tom Hoge", "Si Woo Kim", "Jason Day", "Shane Lowry", "Nicolai Højgaard", "Y.E. Yang",
                                "J.T. Poston", "Matthieu Pavon", "Billy Horschel", "Chris Kirk", "Min Woo Lee", "Jason Dufner",
                                "Francesco Molinari", "Jake Knapp", "Gary Woodland", "Joaquín Niemann", "Tom Kim", "Jimmy Walker",
                                "Thomas Detry", "Rasmus Højgaard", "Phil Mickelson", "Matt Fitzpatrick", "Collin Morikawa", "Luke List",
                                "Mackenzie Hughes", "Austin Eckroat", "Rickie Fowler", "Jon Rahm", "Cameron Young", "Beau Hossler",
                                "Christiaan Bezuidenhout", "Sungjae Im", "Brian Harman", "Scottie Scheffler", "Wyndham Clark",
                                "Brendon Todd", "Thorbjørn Olesen", "Keith Mitchell", "Camilo Villegas", "Patrick Cantlay",
                                "Will Zalatoris", "Brice Garnett", "John Somers", "Jesper Svensson", "Padraig Harrington",
                                "Patrick Reed", "Sam Burns", "Emiliano Grillo", "Alejandro Tosti", "Evan Bowser", "Mark Hubbard",
                                "Maverick McNealy", "Brad Marek", "Wyatt Worthington II", "Chris Gotterup", "Vincent Norrman",
                                "C.T. Pan", "S.H. Kim", "Braden Shattuck"
                            ];

                            function validateGolfers() {
                                var selectedGolfers = $('.golfer').map(function () {
                                    return $(this).val();
                                }).get();

                                var topGolfersCount = 0;
                                var golferCounts = {};
                                var isValid = true;

                                $('.golfer').each(function () {
                                    var golfer = $(this).val();
                                    if (golfer && !availableGolfers.includes(golfer)) {
                                        $(this).addClass('is-invalid').removeClass('is-valid');
                                        isValid = false;
                                    } else if (golfer) {
                                        if (topGolfers.includes(golfer)) {
                                            topGolfersCount++;
                                        }
                                        golferCounts[golfer] = (golferCounts[golfer] || 0) + 1;

                                        if (topGolfersCount > 2 || golferCounts[golfer] > 1) {
                                            $(this).addClass('is-invalid').removeClass('is-valid');
                                            isValid = false;
                                        } else {
                                            $(this).addClass('is-valid').removeClass('is-invalid');
                                        }
                                    } else {
                                        $(this).removeClass('is-invalid is-valid');
                                    }
                                });

                                return isValid;
                            }

                            $('.golfer').on('input', validateGolfers);

                            var form = $('#myForm');

                            form.on('submit', function (e) {
                                e.preventDefault();

                                if (!validateGolfers()) {
                                    Swal.fire('Error!', 'Check your spelling! Please make a selection from the list. Make sure there are no more than 2 top 10 golfers selected.', 'error');
                                    return;
                                }

                                Swal.fire({
                                    title: 'Submitting your picks...',
                                    text: 'Please wait while your picks are processed.',
                                    showConfirmButton: false,
                                    allowOutsideClick: false,
                                    allowEscapeKey: false,
                                    allowEnterKey: false,
                                    onBeforeOpen: function () {
                                        Swal.showLoading();
                                    }
                                });

                                var data = new FormData(form[0]);

                                fetch('https://script.google.com/macros/s/AKfycbzgT8MN-ayPXXdjWJlJc-NeeCK_j5VTkDdpTxsJuolaKQI8sfA5bDW69jYsoRxrVcACiw/exec', {
                                    method: 'POST',
                                    body: data
                                })
                                    .then(function (response) {
                                        if (response.ok) {
                                            return response.json();
                                        } else {
                                            throw new Error('Error: ' + response.statusText);
                                        }
                                    })
                                    .then(function (responseJson) {
                                        Swal.close();
                                        var rowNumber = parseInt(responseJson.row) - 1;
                                        Swal.fire('Success!', 'Submission ID: ' + rowNumber, 'success');
                                        form[0].reset();
                                        $('.golfer').removeClass('is-valid is-invalid');
                                    })
                                    .catch(function (error) {
                                        Swal.close();
                                        Swal.fire('Oops!', 'Something went wrong. Please try again later.', 'error');
                                    });
                            });

                            $(".golfer").autocomplete({
                                source: availableGolfers,
                                select: function (event, ui) {
                                    $(this).val(ui.item.value);
                                    validateGolfers();
                                }
                            });
                        });
                    </script>

                    <div class="form-group text-center">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                </form>
            </div>
        </div>

        <div id="output" class="pt-custom"></div>
    </div>

    <script>
        var deadline = new Date("05/16/24 04:15 AM MST");
        var now = new Date();

        if (now.getTime() > deadline.getTime()) {
            document.getElementById('myForm').style.display = 'none';
            document.getElementById('card2').style.display = 'none';

            var messageDiv = document.createElement('div');
            messageDiv.innerHTML = '<p class="alert alert-danger">Sorry, submissions are now closed.</p>';

            var containerDiv = document.querySelector('.container');
            containerDiv.insertBefore(messageDiv, containerDiv.firstChild);
        }
    </script>
</body>

</html>
