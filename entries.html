<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Google Sheets Viewer</title>
  <link rel="stylesheet" href="entries.css">
  <link rel="shortcut icon" href="195540.png" type="image/x-icon" />
  <!-- Add your CSS file link here -->
</head>
<body>
  <!-- Add your content here -->
  <main id="content">
    <!-- We will add the table for Google Sheets data here -->
  </main>

  <nav id="bottom-nav">
    <ul>
      <li><a href="index.html" id="menu-item-1">Leaderboard</a></li>
      <li><a href="players.html" id="menu-item-2">Players</a></li>
      <!-- <li><a href="entries.html" id="menu-item-3">Entries</a></li> -->
      <li><a href="form.html" id="menu-item-4">Form</a></li>
    </ul>
  </nav>

  <div id="player-picks" style="display:none;">
    <h2>Player Picks</h2>
    <button id="close-picks">Close</button>
    <div id="picks-content"></div>
  </div>
  

  <!-- <script src="scripts.js"></script> -->

</body>


<script>// Replace with your API key and spreadsheet ID
    const apiKey = 'AIzaSyCTIOtXB0RDa5Y5gubbRn328WIrqHwemrc';
const spreadsheetId = '1_bP0NUG6XqrF0XQvKXNm3b07QuHABfvWotsemGToyYg';

// Function to fetch Google Sheets data
async function fetchGoogleSheetsData() {
  try {
    const response = await fetch(`https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/Sheet1!A:K?key=${apiKey}`);
    const data = await response.json();

    // Check if there's an error in the response
    if (data.error) {
      throw new Error(data.error.message);
    }

    displayTable(data);
  } catch (error) {
    console.error('Error fetching Google Sheets data:', error);
  }
}

// Function to display data in a table format
function displayTable(data) {
  const { values } = data;

  if (!values || values.length === 0) {
    console.log('No data found in the Google Sheet.');
    return;
  }

  const table = document.createElement('table');
  table.classList.add('data-table');

  // Create table header
  const thead = document.createElement('thead');
  const headerRow = document.createElement('tr');

  values[0].forEach((header) => {
    const th = document.createElement('th');
    th.textContent = header;
    headerRow.appendChild(th);
  });

  thead.appendChild(headerRow);
  table.appendChild(thead);

  // Create table body
  const tbody = document.createElement('tbody');

  values.slice(1).forEach((row) => {
    const tableRow = document.createElement('tr');

    row.forEach((cell, index) => {
      const td = document.createElement('td');
      if (index === 0) {
        td.innerHTML = `<span class="player-name">${cell}</span>`;
      } else {
        td.textContent = cell;
      }
      tableRow.appendChild(td);
    });

    tbody.appendChild(tableRow);
  });

  table.appendChild(tbody);

  // Add table to the content container
  document.getElementById('content').appendChild(table);

  // Add click event listeners to player names
  const playerNames = document.querySelectorAll('.player-name');
  playerNames.forEach((name) => {
    name.addEventListener('click', () => {
      fetchPlayerPicks(name.textContent);
    });
  });
}

// Function to fetch player picks
async function fetchPlayerPicks(playerName) {
  try {
    const response = await fetch(
      `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/entries!A1:Z?key=${apiKey}`
    );
    const data = await response.json();

    if (data.error) {
      throw new Error(data.error.message);
    }

    displayPlayerPicks(data, playerName);
  } catch (error) {
    console.error('Error fetching player picks:', error);
  }
}

// Function to display player picks
function displayPlayerPicks(data, playerName) {
  const picksContent = document.getElementById('picks-content');
  picksContent.innerHTML = ''; // Clear previous content

  // Filter the picks for the selected player
  const picks = data.values.filter((row) => row[0] === playerName);

  // Create a new table and display the filtered picks
  const table = document.createElement('table');
  table.classList.add('data-table');
  table.innerHTML = `<thead>
      <tr>
        <th>Pick</th>
        <th>Selection</th>
      </tr>
    </thead>
    <tbody>
      ${picks
        .map(
          (pick) => `
        <tr>
          <td>${pick[1]}</td>
          <td>${pick[2]}</td>
        </tr>
      `
        )
        .join('')}
    </tbody>
  `;
picksContent.appendChild(table);
document.getElementById('player-picks').style.display = 'block';
}

// Close player picks div
document.getElementById('close-picks').addEventListener('click', () => {
document.getElementById('player-picks').style.display = 'none';
});

// Fetch the data and display it on the page
fetchGoogleSheetsData();
   

    </script>
</html>
