<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css"
    crossorigin="anonymous">

  <title>Golfers</title>
  <link rel="stylesheet" href="style.css">
  <link rel="shortcut icon" href="195540.png" type="image/x-icon" />
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!--   display a popup to not use this screen  -->
  <!--   <script>
    function displayPopup() {
      var screenWidth = window.innerWidth;
      var mobileWidth = 3600; // The width at which we consider the device to be a mobile device

      if (screenWidth < mobileWidth) {
        alert('Please do not reference this players list. We are still waiting on ESPN to update their site for The Masters field. What a bunch of clowns.');
      }
    }

    // Call the function to display the popup when the page loads
    displayPopup();
  </script> -->
</head>

<include virtual="header.html">

  <body id="players">
    <script>
      // Include your header.html file
      $("body").prepend('<div id="header-placeholder"></div>');
      $("#header-placeholder").load("header.html", function () {
        setPageTitle();
      });

      function setPageTitle() {
        var pageTitle;
        var bodyId = $('body').attr('id');

        switch (bodyId) {
          case "players":
            pageTitle = "Players";
            break;
        }

        var logo = document.querySelector(".logo");
        logo.textContent = pageTitle;
      }
    </script>
    <!-- Add your content here -->
    <main id="content">
      <!-- We will add the table for Google Sheets data here -->
    </main>

    <nav id="bottom-nav">
      <ul>
        <li>
          <a href="index.html" id="menu-item-1">
            <i class="fas fa-trophy fa-bounce"></i>
            <span class="nav-text">Leaderboard</span>
          </a>
        </li>
        <li>
          <a href="players.html" id="menu-item-2">
            <i class="fas fa-user"></i>
            <span class="nav-text">Players</span>
          </a>
        </li>
        <li>
          <a href="entries.html" id="menu-item-2">
            <i class="fa-solid fa-list"></i>
            <span class="nav-text">Entries</span>
          </a>
        </li>
        <li>
          <a href="form.html" id="menu-item-4">
            <i class="fas fa-file-alt"></i>
            <span class="nav-text">Form</span>
          </a>
        </li>
      </ul>
    </nav>


    <!-- <script src="scripts.js"></script> -->

  </body>

  <script>
    // Replace with your API key and spreadsheet ID
    const apiKey = 'AIzaSyCTIOtXB0RDa5Y5gubbRn328WIrqHwemrc';
    const spreadsheetId = '1zCKMy2jgG9QoIhxFqRviDm4oxEFK_ixv_tN66GmCXTc';

    // Function to fetch Google Sheets data
    // Function to fetch Google Sheets data
    async function fetchGoogleSheetsData() {
      try {
        const response = await fetch(
          `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/Sheet1!A1:Z?key=${apiKey}`);
        const data = await response.json();

        // Check if there's an error in the response
        if (data.error) {
          throw new Error(data.error.message);
        }

        displayTable(data);
      } catch (error) {
        console.error('Error fetching Google Sheets data:', error);
      }
    }


    // Function to display data in a table format
    function displayTable(data) {
      const {
        values
      } = data;

      if (!values || values.length === 0) {
        console.log('No data found in the Google Sheet.');
        return;
      }

      const table = document.createElement('table');
      table.classList.add('data-table');

      // Create table header
      const thead = document.createElement('thead');
      const headerRow = document.createElement('tr');

      values[0].forEach((header) => {
        const th = document.createElement('th');
        th.textContent = header;
        headerRow.appendChild(th);
      });

      thead.appendChild(headerRow);
      table.appendChild(thead);

      // Create table body
      const tbody = document.createElement('tbody');

      values.slice(1).forEach((row) => {
        const tableRow = document.createElement('tr');

        row.forEach((cell) => {
          const td = document.createElement('td');
          td.textContent = cell;
          tableRow.appendChild(td);
        });

        tbody.appendChild(tableRow);
      });

      table.appendChild(tbody);

      // Add table to the content container
      document.getElementById('content').appendChild(table);
    }

    // document.addEventListener('DOMContentLoaded', () => {
    //   document.getElementById('close-picks').addEventListener('click', () => {
    //     document.getElementById('player-picks').style.display = 'none';
    //   });
    // });


    // Fetch the data and display it on the page
    fetchGoogleSheetsData();
  </script>

</html>